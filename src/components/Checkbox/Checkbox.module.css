/* Wrapper */
.checkboxWrapper {
  display: inline-flex;
  flex-direction: column;
  margin-bottom: 16px;

  &.disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }

  &.error {
    color: var(--color-error);

    .checkmark {
      border-color: var(--color-error);
    }

    .input:checked ~ .checkmark,
    .input[data-indeterminate='true'] ~ .checkmark {
      background-color: var(--color-error);
      border-color: var(--color-error);
    }

    .input:focus ~ .checkmark {
      border-color: var(--color-error);
      box-shadow: 0 0 0 3px var(--color-error-20);
    }

    /* Hover states in error */
    .checkboxContainer:hover .checkmark {
      border-color: var(--color-error-hover);
      background-color: #ffebee;
    }

    .input:checked ~ .checkmark:hover,
    .input[data-indeterminate='true'] ~ .checkmark:hover {
      background-color: var(--color-error-hover);
      border-color: var(--color-error-hover);
    }
  }
}

/* Row */
.checkboxContainer {
  display: flex;
  align-items: center;
  cursor: pointer;
}

.checkboxWrapper.disabled .checkboxContainer {
  cursor: not-allowed;
}

/* Native input */
.input {
  position: absolute;
  opacity: 0;
  cursor: pointer;
  height: 0;
  width: 0;
}

/* Box */
.checkmark {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
  border: 2px solid var(--color-border);
  border-radius: 4px;
  background-color: var(--color-surface);
  transition: all 0.3s ease;
  flex-shrink: 0;
  position: relative;

  .checkboxContainer:hover & :not(.disabled) {
    border-color: var(--color-text-muted);
    background-color: var(--color-disabled-bg);
  }

  .input:focus ~ & {
    border-color: var(--color-primary);
    box-shadow: var(--focus-ring);
  }

  .input:checked ~ & {
    background-color: var(--color-primary);
    border-color: var(--color-primary);
  }

  .input:checked:focus ~ & {
    box-shadow: var(--focus-ring);
  }

  .input[data-indeterminate='true'] ~ & {
    background-color: var(--color-primary);
    border-color: var(--color-primary);
  }
}

/* Icon */
.checkmarkIcon {
  color: white;
  font-size: 14px;
  font-weight: bold;
  line-height: 1;
  transition: transform 0.2s ease;
}

/* Indeterminate bar */
.indeterminate {
  width: 10px;
  height: 2px;
  background-color: white;
  border-radius: 1px;
}

/* Label */
.label {
  margin-left: 12px;
  font-size: 16px;
  color: var(--color-text);
  cursor: pointer;
  user-select: none;

  &.labelError {
    color: var(--color-error);
  }
}

.checkboxWrapper.disabled .label {
  color: var(--color-disabled);
  cursor: not-allowed;
}

/* Checked icon animation */
.input:checked ~ .checkmark .checkmarkIcon {
  transform: scale(1.2);
}

/* Sizes */
.checkboxWrapper.small {
  .checkmark {
    width: 16px;
    height: 16px;
  }
  .checkmarkIcon {
    font-size: 12px;
  }
  .indeterminate {
    width: 8px;
    height: 2px;
  }
  .label {
    font-size: 14px;
  }
}

.checkboxWrapper.large {
  .checkmark {
    width: 24px;
    height: 24px;
  }
  .checkmarkIcon {
    font-size: 16px;
  }
  .indeterminate {
    width: 12px;
    height: 3px;
  }
  .label {
    font-size: 18px;
  }
}

/* Helper text */
.helperText {
  margin-top: 4px;
  font-size: 12px;
  color: var(--color-text-muted);
  margin-left: 0;

  &.helperTextError {
    color: var(--color-error);
  }
}
